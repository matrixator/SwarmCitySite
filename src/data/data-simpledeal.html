<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<dom-module id="data-simpledeal">
    <script>
        class DataSimpledeal extends Polymer.Element {
            static get is() {
                return 'data-simpledeal';
            }

            /**
            * Filter the hashtag object to return a formatted list of items the user is involved in
            * @return {items} The array with items the user is involved in
            * @argument {object} hashtag
            * @argument {String} userAddress
            */
            getHashtagItemsInvolved(hashtag, userAddress) {
                return new Promise((resolve, reject) => {
                    let items = Object.values(hashtag.items)
                        // only return items the user is involved with
                        .filter((item) => {
                            return item.seeker.address == userAddress;
                        })
                        // formate the item value to human readable amount
                        .map((item) => {
                            item.value = item.value / 1e18;
                            return item;
                        // sort the array by date, newest first
                        }).sort((a, b) => {
                            return parseInt(b.dateTime) - parseInt(a.dateTime);
                        });
                    resolve(items);
                });
            }
        } window.customElements.define(DataSimpledeal.is, DataSimpledeal);
    </script>
</dom-module>