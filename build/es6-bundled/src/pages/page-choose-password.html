<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="display-new-account" assetpath="../displays/"><template><style include="shared-styles">:host{display:block;width:100%;}.container{@apply --layout-vertical;@apply --layout-center-center;}.container[wide-layout]{@apply --layout-vertical;@apply --layout-start;@apply --layout-start-justified;}paper-input{width:100%;text-align:center;@apply --sc-paper-input;--paper-input-container-label:{@apply --body-default;};--paper-input-container-input:{@apply --body-bold;};--paper-input-error:{@apply --body-bold;};--paper-input-prefix:{@apply --body-default;};--paper-input-suffix:{@apply --body-default;};}.container[wide-layout] paper-input{text-align:left;max-width:400px;}.container .errorcontainer{@apply --error-container;}.container[wide-layout] .errorcontainer{min-height:8vh;@apply --error-container-wide;}#error{@apply --error-msg;}.container[wide-layout] #error{@apply --error-msg-wide;}.btn{@apply --icon-button-big;}.agree{@apply --next-blue-normal;opacity:0.2;}.enabled{opacity:1;}.enabled:active{@apply --button-active;}@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
            only screen and (min--moz-device-pixel-ratio: 1.5),
            only screen and (min-resolution: 240dpi){.close,
                .agree{@apply --retina;}}</style><data-wallet id="wallet"></data-wallet><iron-media-query query="(min-width: 600px)" query-matches="{{wide}}"></iron-media-query><div class="container" wide-layout$="{{wide}}"><paper-input id="password" label="{{localize('password?')}}" type="password" on-input="_checkInput" value="{{password}}" autofocus="" on-keydown="_checkForEnter"></paper-input><paper-input id="repeat" label="{{localize('Confirm password')}}" type="password" on-input="_checkInput" value="{{confirmPassword}}" on-keydown="_checkForEnter"></paper-input><div class="errorcontainer"><span id="error">{{error}}</span></div><div class="btn"><div id="agree" class="agree" on-click="_agree"></div></div></div></template><script>class DisplayNewAccount extends(new ReduxMixin(Polymer.mixinBehaviors([Polymer.AppLocalizeBehavior],Polymer.Element))){static get is(){return"display-new-account"}static get properties(){return{language:{type:String,statePath:"language"},password:{type:String},confirmPassword:{type:String},publicKey:{type:String,statePath:"publicKey"},error:{type:String},path:{type:String,reflectToAttribute:!0,notify:!0,observer:"_resetValues"},routeEntry:{type:Array,observer:"_resetValues"}}}static get actions(){return Object.assign({PUBLICKEY:function(publicKey){return{type:"PUBLICKEY",publicKey:publicKey}}})}connectedCallback(){super.connectedCallback();this.loadResources(this.resolveUrl("../text-translations.json"))}_checkForEnter(e){if(13===e.keyCode){this._agree()}}_resetValues(){if("choose-password"==this.routeEntry[0]){this.password=null;this.confirmPassword=null;this.error=null}}_agree(){if(this.password&&1<=this.password.length&&this.confirmPassword&&this.password==this.confirmPassword){this.$.wallet.createKey(this.password).then(keyStore=>{let storage=JSON.parse(localStorage.getItem("SwarmCity"));storage.keyStore=keyStore.utcKeystore;this.dispatch("PUBLICKEY",storage.keyStore.address);localStorage.setItem("SwarmCity",JSON.stringify(storage));this.path="account-complete/"})}}_checkInput(){this.error="";if(this.password&&this.confirmPassword&&1<=this.password.length&&1<=this.confirmPassword.length){if(this.confirmPassword.length<=this.password.length){for(let i=0;i<this.confirmPassword.length;i++){if(this.confirmPassword[i]!=this.password[i]){this.error=this.localize("The passwords dont match.")}}}else{this.error=this.localize("The passwords dont match.")}}if(this.password&&1<=this.password.length&&this.confirmPassword&&this.password==this.confirmPassword){this.$.agree.classList.add("enabled")}else this.$.agree.classList.remove("enabled")}}window.customElements.define(DisplayNewAccount.is,DisplayNewAccount);</script></dom-module></div><dom-module id="page-choose-password"><template><style include="shared-styles">:host{@apply --titlepage-closed;}.container{background-image:var(--sc-bg);@apply --titlepage-closed-container;}.container .top{@apply --titlepage-closed-container-top;}.container .bottom{@apply --titlepage-closed-container-bottom;}.container .title{@apply --titlepage-title;color:var(--sc-grey3b);}.container[wide-layout]{@apply --titlepage-closed-wide-container;}.container[wide-layout] .top{@apply --titlepage-closed-wide-container-top;}.container[wide-layout] .bottom{@apply --titlepage-closed-wide-container-bottom;}.container[wide-layout] .title{@apply --titlepage-title-wide;}.close{@apply --xmark-grey3-small;@apply --close;}.close:active{@apply --button-active;}.flexer{@apply --titlepage-flexer;}@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
            only screen and (min--moz-device-pixel-ratio: 1.5),
            only screen and (min-resolution: 240dpi){.close{@apply --retina;}}</style><app-location route="{{route}}"></app-location><iron-media-query query="(min-width: 600px)" query-matches="{{wide}}"></iron-media-query><div class="container" wide-layout$="{{wide}}"><div class="top"><div class="close" on-click="_close"></div><div class="title" id="title">{{localize('Choose a password.')}}</div></div><div class="flexer"></div><div class="bottom"><display-new-account path="{{path}}" route-entry="{{routeEntry}}" id="content"></display-new-account></div></div></template><script>class MyChoosePassword extends(new ReduxMixin(Polymer.mixinBehaviors([Polymer.AppLocalizeBehavior],Polymer.Element))){static get is(){return"page-choose-password"}static get properties(){return{language:{type:String,statePath:"language"},path:{type:String,observer:"_path"},routeExit:{type:Array,observer:"_loadExitAnimations"},routeEntry:{type:Array,observer:"_loadEntryAnimations"},pageID:{type:String,value:"choose-password"}}}static get actions(){return Object.assign({PUBLICKEY:function(publicKey){return{type:"PUBLICKEY",publicKey:publicKey}},AVATAR:function(avatar){return{type:"AVATAR",avatar:avatar}},USERNAME:function(username){return{type:"USERNAME",username:username}}})}connectedCallback(){super.connectedCallback();this.loadResources(this.resolveUrl("../text-translations.json"))}_close(){this._deleteProfile();if(sessionStorage.getItem("origin")){this.path=sessionStorage.getItem("origin");sessionStorage.removeItem("origin")}else{this.path="hashtag-list"}}_deleteProfile(){this.dispatch("PUBLICKEY",null);this.dispatch("AVATAR","[[importHref]]../../images/defaultavatar.png");this.dispatch("USERNAME",null);localStorage.clear();localStorage.setItem("SwarmCity",JSON.stringify({user:{language:"en",username:"",location:"",avatar:""},keyStore:{}}))}_path(){if(null!=this.path){this.set("route.path",this.path)}this.path=null}_loadExitAnimations(){if(this.routeExit[0]!=this.routeExit[1]){if(this.routeExit[0]==this.pageID){}}}_loadEntryAnimations(){if(this.routeExit[0]!=this.routeExit[1]){if(this.routeExit[1]==this.pageID){}}}}window.customElements.define(MyChoosePassword.is,MyChoosePassword);</script></dom-module></body></html>